<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="author" content="Eric"><meta name="keywords" content=""><meta name="description" content="数据提取(3)XPath的使用XPath和XLML类库
lxml是一款高性能的python HTML/XML解释器，我们可以利用XPath，来快速的定位特定元素以及获取节点信息。
XPath(XML Path Language)定义：是一门在HTML/XML文档中查找信息的语言，可以用来在HT..."><meta name="Robots" content="all"><title>Eric个人博客 | 爬虫(三)——数据提取之XPath</title><link rel="icon" href="/images/icon.svg"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/atom-one-dark.css"><link rel="stylesheet" href="/css/style.css"><script src="/js/highlight.min.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Eric个人博客" type="application/atom+xml"></head><body><div class="main-container"><header class="header"><div class="global-width"><nav class="nav-box"><a class="nav-item" href="/">主页</a> <a class="nav-item" href="/resume">项目</a> <a class="nav-item" href="/mood" target="_blank">热点观点</a> <a class="nav-item" href="/2018/01/01/introduce/" target="_blank">个人介绍</a> <a class="nav-item" href="/fuye.md">关于</a></nav></div></header><section class="content global-width"><div class="main"><article class="box post"><div class="post-title align-center detail-title">爬虫(三)——数据提取之XPath</div><div class="post-meta align-center"><span class="label">原创</span> <span class="dotted">|</span> <i class="fa fa-calendar"></i> <time>2019-03-16</time> <span class="dotted">|</span> <i class="fa fa-user"></i> Eric <span class="dotted">|</span> <i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a></div><div class="post-content"><h1 id="数据提取-3"><a href="#数据提取-3" class="headerlink" title="数据提取(3)"></a>数据提取(3)</h1><h2 id="XPath的使用"><a href="#XPath的使用" class="headerlink" title="XPath的使用"></a>XPath的使用</h2><h3 id="XPath和XLML类库"><a href="#XPath和XLML类库" class="headerlink" title="XPath和XLML类库"></a>XPath和XLML类库</h3><ul><li>lxml是一款高性能的python HTML/XML解释器，我们可以利用XPath，来快速的<font color="red">定位特定元素</font>以及获取节点信息。</li><li>XPath(XML Path Language)定义：是一门<font color="red">在HTML/XML文档中查找信息的语言，</font>可以用来在HTML/XML文档中对元素和属性进行<font color="red">遍历</font>。</li><li>学习文档：<a target="_blank" rel="noopener" href="https://www.w3school.com.cn/xpath/index.asp">https://www.w3school.com.cn/xpath/index.asp</a><a id="more"></a><h4 id="认识XML"><a href="#认识XML" class="headerlink" title="认识XML"></a>认识XML</h4></li><li>XML<ul><li>是一种可扩展标记语言</li><li>目的：被设计为传输和存储数据，其焦点是数据的内容</li><li>节点：每个XML的标签称之为节点</li></ul></li><li>HTML<ul><li>是一种超文本标记语言</li><li>目的：显示数据以及如何更好显示数据</li></ul></li></ul><h4 id="XPath节点选择"><a href="#XPath节点选择" class="headerlink" title="XPath节点选择"></a>XPath节点选择</h4><ul><li>工具<ul><li><font color="red">Chrome插件XPath Helper</font></li><li>开源XPath表达式编辑工具：XMLQuire(XML格式文件可用)</li><li>Firefox插件 XPath Checker</li></ul></li></ul><h4 id="节点选择语法"><a href="#节点选择语法" class="headerlink" title="节点选择语法"></a>节点选择语法</h4><ul><li>XPath使用路径表达式来提取XML文档中的节点或者节点集。这些<font color="red">路径表达式</font>和在常规的linux电脑文件系统中看到的表达式非常相似。</li><li><img src="https://img-blog.csdnimg.cn/20190828191437117.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzE3MDg2Mw==,size_16,color_FFFFFF,t_70" alt="语法"><h4 id="XPath学习重点"><a href="#XPath学习重点" class="headerlink" title="XPath学习重点"></a>XPath学习重点</h4></li><li>使用xpath helper或者是chrome中的copy xpath都是从element中提取的数据，但是爬虫获取的是url对应的响应，往往和element不一样。</li><li>获取文本<ul><li><code>a/text()</code>获取a下的文本</li><li><code>a//text()</code>获取a下的所有标签的文本</li><li><code>//a[text()=&quot;下一页&quot;]</code>选择文本为“下一页”三个字的a标签</li></ul></li><li>@符号<ul><li><code>a/@href</code></li><li><code>a//ul[@id=&quot;detail&quot;]</code></li></ul></li><li>//符号<ul><li>在xpath开始的时候表示从当前html中任意位置开始选择</li><li><code>li//a</code>表示li标签下的任意一个a标签</li></ul></li><li>提取<a target="_blank" rel="noopener" href="https://movie.douban.com/chart">https://movie.douban.com/chart</a>网页中电影的名称，图片<ul><li><code>//div[@class=&quot;indent&quot;]//table//div[@class=&quot;pl2&quot;]/a//text()</code></li><li><code>//div[@class=&quot;indent&quot;]//table//a[@class=&quot;nbg&quot;]/img/@src</code></li></ul></li><li><img src="https://img-blog.csdnimg.cn/20190828200532209.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzE3MDg2Mw==,size_16,color_FFFFFF,t_70" alt="节点选择"></li><li><img src="https://img-blog.csdnimg.cn/20190828200640958.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzE3MDg2Mw==,size_16,color_FFFFFF,t_70" alt="节点"><h4 id="python中lxml库"><a href="#python中lxml库" class="headerlink" title="python中lxml库"></a>python中lxml库</h4></li><li>使用入门：<ul><li>导入lxml的etree库<br><code>from lxml import etree</code><ul><li>利用etree.HTML，将字符串转化为Element对象</li></ul></li><li>Element对象具有xpath的方法<br><code>html = etree.HTML(text)</code></li></ul></li><li>lxml可以自动修正html对象</li></ul><h4 id="lxml使用注意点"><a href="#lxml使用注意点" class="headerlink" title="lxml使用注意点"></a>lxml使用注意点</h4><ul><li>lxml能够修正HTML代码，但是可能会改错了<ul><li>使用etree.tostring()观察修改后的html的样子，根据修改之后的html字符串写xpath</li></ul></li><li>lxml能够接受bytes和str字符串</li><li>提取页面数据的思路<ul><li>先分组，取到一个包含分组标签的列表</li><li>遍历，取其中每一组进行数据的提取，不会造成数据的对应错乱</li></ul></li></ul><h4 id="xpath的包含"><a href="#xpath的包含" class="headerlink" title="xpath的包含"></a>xpath的包含</h4><ul><li><code>//div[contains(@class,&#39;i&#39;)]</code></li></ul></div></article></div><div class="aside"><div class="box widget"><div class="introduction"><p><img src="/images/ironman.jpg" alt="head-sculpture"></p><p class="name">罗明辉Eric</p><p class="slogan">个人博客，分享经验，分享快乐</p></div></div><div class="box widget"><div class="title">最新</div><ul class="item-box"><li><a href="/2020/09/26/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%BB%BA%E6%A8%A1/">数据仓库-建模</a></li><li><a href="/2020/09/20/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9E%B6%E6%9E%84/">数据仓库-架构</a></li><li><a href="/2020/09/19/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%A6%82%E8%BF%B0/">数据仓库-概述</a></li><li><a href="/2020/09/18/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a></li><li><a href="/2020/07/28/%E6%95%B0%E6%8D%AE%E5%BA%93/SQL%E8%AF%AD%E5%8F%A5%E8%B0%83%E4%BC%98/">SQL语句调优</a></li><li><a href="/2020/07/26/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E5%8E%9F%E7%90%86/">Mysql底层原理</a></li><li><a href="/2020/07/25/%E6%95%B0%E6%8D%AE%E5%BA%93/MySql%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%BC%95%E6%93%8E/">MySql数据库的引擎</a></li><li><a href="/2020/07/15/BigDataFrame/HBase%E5%85%A5%E9%97%A8/">HBase入门</a></li></ul></div><div class="box widget"><div class="title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BI%E5%B7%A5%E5%85%B7/">BI工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ETL%E5%B7%A5%E5%85%B7/">ETL工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6/">大数据框架</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">1</span></li></ul></div><div class="box widget"><div class="title">归档</div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">2020-09</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">2020-07</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">2020-06</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">2020-05</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">2020-01</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">2019-12</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">2019-07</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">2019-03</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">2018-09</a><span class="archive-list-count">1</span></li></ul></div></div></section><footer class="footer"><div class="global-width footer-box"><div class="copyright"><span>Copyright &copy; 2020</span> <span class="dotted">|</span> <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span> <span class="dotted">|</span></div></div></footer></div><script>hljs.initHighlightingOnLoad()</script></body></html>