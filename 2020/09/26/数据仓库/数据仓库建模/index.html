<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="author" content="Eric"><meta name="keywords" content=""><meta name="description" content="数据仓库-建模方法一、基本概念OLTP系统建模方法
OLTP(在线事务处理)系统中，主要操作是随机读写
为了保证数据的一致性、减少冗余，常使用关系模型
在关系模型中，常使用3NF来减少冗余

OLAP系统1.基本概念
OLAP系统，主要操作是复杂分析查询；关注数据聚合，以及分析、处理性能
OL..."><meta name="Robots" content="all"><title>Eric个人博客 | 数据仓库-建模</title><link rel="icon" href="/images/icon.svg"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/atom-one-dark.css"><link rel="stylesheet" href="/css/style.css"><script src="/js/highlight.min.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Eric个人博客" type="application/atom+xml"></head><body><div class="main-container"><header class="header"><div class="global-width"><nav class="nav-box"><a class="nav-item" href="/">主页</a> <a class="nav-item" href="/resume">项目</a> <a class="nav-item" href="/mood" target="_blank">热点观点</a> <a class="nav-item" href="/2018/01/01/introduce/" target="_blank">个人介绍</a> <a class="nav-item" href="/fuye.md">关于</a></nav></div></header><section class="content global-width"><div class="main"><article class="box post"><div class="post-title align-center detail-title">数据仓库-建模</div><div class="post-meta align-center"><span class="label">原创</span> <span class="dotted">|</span> <i class="fa fa-calendar"></i> <time>2020-09-26</time> <span class="dotted">|</span> <i class="fa fa-user"></i> Eric <span class="dotted">|</span> <i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a></div><div class="post-content"><h1 id="数据仓库-建模方法"><a href="#数据仓库-建模方法" class="headerlink" title="数据仓库-建模方法"></a>数据仓库-建模方法</h1><h3 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h3><h4 id="OLTP系统建模方法"><a href="#OLTP系统建模方法" class="headerlink" title="OLTP系统建模方法"></a>OLTP系统建模方法</h4><ul><li>OLTP(在线事务处理)系统中，主要操作是随机读写</li><li>为了保证数据的一致性、减少冗余，常使用关系模型</li><li>在关系模型中，常使用3NF来减少冗余</li></ul><h4 id="OLAP系统"><a href="#OLAP系统" class="headerlink" title="OLAP系统"></a>OLAP系统</h4><h5 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1.基本概念"></a>1.基本概念</h5><ol><li>OLAP系统，主要操作是<font color="red">复杂分析查询</font>；关注数据聚合，以及分析、处理性能</li><li>OLAP根据数据存储方法不同，又分为ROLAP、MOLAP、HOLAP<a id="more"></a></li></ol><h5 id="2-分类"><a href="#2-分类" class="headerlink" title="2. 分类"></a>2. 分类</h5><ul><li><font color="red">ROLAP(Relation)</font> : 使用关系模型构建，存储系统一般为RDBMS</li><li><font color="red">MOLAP(Multidimensional)</font> : 预先聚合计算，使用多维数组的形式保存数据结果，加快查询分析时间</li><li><font color="red">HOLAP(Hybrid)</font> : ROLAP和MOLAP两者的集成；如底层是关系型的，高层是多维矩阵型的；查询效率高于ROLAP，低于MOLAP</li><li>ROLAP依赖于模型设计，MOLAP和HOLAP依赖于产品的选型</li></ul><h3 id="二、ROLAP"><a href="#二、ROLAP" class="headerlink" title="二、ROLAP"></a>二、ROLAP</h3><h4 id="建模方法"><a href="#建模方法" class="headerlink" title="建模方法"></a>建模方法</h4><p>维度模型适合数据仓库需要经常发生变化的情况。</p><h5 id="1-ER模型"><a href="#1-ER模型" class="headerlink" title="1. ER模型"></a>1. ER模型</h5><ul><li>出发点是整合数据，为数据分析决策服务</li><li>需要全面了解业务和数据</li><li>实施周期昌</li><li>对建模人员能力要求不高</li></ul><h5 id="2-维度模型"><a href="#2-维度模型" class="headerlink" title="2. 维度模型"></a>2. 维度模型</h5><ul><li>为分析需求服务，更快完成需求分析</li><li>具有较好大规模复杂查询相应性能</li><li><font color="red">最流行的数仓建模方法</font></li></ul><h5 id="3-Data-Value"><a href="#3-Data-Value" class="headerlink" title="3.Data Value"></a>3.Data Value</h5><ul><li>ER模型的衍生</li><li>强调数据的历史性、可追溯、原子性</li><li>弱化一致性处理和整合</li><li>引入范式，应对原系统的扩展性</li></ul><h5 id="4-Anchor"><a href="#4-Anchor" class="headerlink" title="4.Anchor"></a>4.Anchor</h5><ul><li>Data Value模型的衍生</li><li>初衷为设计一个高度可扩展模型</li><li>会带来较多的join操作</li></ul><h4 id="维度模型"><a href="#维度模型" class="headerlink" title="维度模型"></a>维度模型</h4><p>维度模型中，表被分为维度表、事实表，维度是对事实的一种组织</p><p>维度一般包含分类、时间、地域</p><p>维度模型分为星型模型、雪花模型、星座模型</p><p>维度模型建立后，方便对数据进行多维分析</p><h5 id="1-星型模型"><a href="#1-星型模型" class="headerlink" title="1. 星型模型"></a>1. 星型模型</h5><p><img src="https://i.loli.net/2020/11/10/CmSca6DftOEWrp7.png" alt="image-20201110141723052"></p><p>只有一层维度，只有一个事实表带着一层维度表，分析性能最优</p><h5 id="2-雪花模型"><a href="#2-雪花模型" class="headerlink" title="2. 雪花模型"></a>2. 雪花模型</h5><p><img src="https://i.loli.net/2020/11/10/OgScAaMQBYoZ5EL.png" alt="image-20201110141858151"></p><p>多层维度，比较接近三范式，较为灵活</p><h5 id="3-星座模型"><a href="#3-星座模型" class="headerlink" title="3. 星座模型"></a>3. 星座模型</h5><p><img src="https://i.loli.net/2020/11/10/bY6VnL8C57gIkry.png" alt="image-20201110142002597"></p><p>星座模型基于多个事实表，事实表之间会共享一些维度表</p><p>随着业务的增长</p><h4 id="宽表模型"><a href="#宽表模型" class="headerlink" title="宽表模型"></a>宽表模型</h4><ul><li>宽表模型是维度模型的衍生，适合join性能不佳的数据仓库产品</li><li>宽表模型将维度冗余到实施表中，形成宽表，以此减少join操作</li></ul><h3 id="三、MOLAP"><a href="#三、MOLAP" class="headerlink" title="三、MOLAP"></a>三、MOLAP</h3><p>实际就是一种以空间换时间的方式</p><ul><li>MOLAP将数据进行预计算，并将聚合结果存储到CUBE模型中</li><li>CUBE模型以多维数据的形式，物化到存储系统中，加快后续的查询</li><li>生成CUBE需要大量的时间，空间，维度预处理可能会导致数据膨胀</li></ul><p><img src="https://i.loli.net/2020/11/10/xdc9KY8DaTpLHtG.png" alt="image-20201110145727029"></p><h3 id="四、多维分析"><a href="#四、多维分析" class="headerlink" title="四、多维分析"></a>四、多维分析</h3><p>OLAP主要操作是复杂查询，可以多表关联，使用count、sum、avg等聚合函数</p><p>OLAP对复杂查询操作做了值观的定义，包括钻取、切片、切块、旋转</p><p><img src="https://i.loli.net/2020/11/10/aZwBzeQsJnTX26W.png" alt="image-20201110150752383"></p><h3 id="五、表"><a href="#五、表" class="headerlink" title="五、表"></a>五、表</h3><h4 id="表类型"><a href="#表类型" class="headerlink" title="表类型"></a>表类型</h4><h5 id="1-维度表"><a href="#1-维度表" class="headerlink" title="1.维度表"></a>1.维度表</h5><h5 id="2-事实表"><a href="#2-事实表" class="headerlink" title="2.事实表"></a>2.事实表</h5><p><strong>事务事实表</strong></p><p>随着业务不断产生的数据，一旦产生不会再变化，如交易流水、操作日志、出库入库记录</p><p><img src="https://i.loli.net/2020/11/10/2C3JqOHdL8sEoDW.png" alt="image-20201110150959052"></p><p><strong>周期快照事实表</strong></p><ul><li>随着业务周期型的推进而变化，完成间隔周期内的度量统计，如年、季度累计</li><li>使用周期+状态度量的组合，如年累计订单数，年是周期，订单总数是量度</li></ul><p><img src="https://i.loli.net/2020/11/10/RTWUJmS2l7oLe89.png" alt="image-20201110151039241"></p><p><strong>累计快照事实表</strong></p><ul><li>记录不确定周期的度量统计，完全覆盖一个事实的生命周期，如订单状态表</li><li>通常有多个时间字段，用于记录生命周期中的关键时间点</li><li>只有一条记录，针对此记录不断更新</li></ul><p><img src="https://i.loli.net/2020/11/10/MxcQ1kjmfihopeD.png" alt="image-20201110151148701"></p><p><strong>拉链表</strong></p><ul><li>拉链表记录每条信息的生命周期，用于保留数据的所有历史（变更）状态</li><li>拉链表将表数据的随机修改方式，变为顺序追加</li></ul><p><img src="https://i.loli.net/2020/11/10/p2w1AMUq9yJl4Rk.png" alt="image-20201110151553782"></p></div></article></div><div class="aside"><div class="box widget"><div class="introduction"><p><img src="/images/ironman.jpg" alt="head-sculpture"></p><p class="name">罗明辉Eric</p><p class="slogan">个人博客，分享经验，分享快乐</p></div></div><div class="box widget"><div class="title">最新</div><ul class="item-box"><li><a href="/2020/11/13/BigDataFrame/Flink/">Flink</a></li><li><a href="/2020/09/26/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%BB%BA%E6%A8%A1/">数据仓库-建模</a></li><li><a href="/2020/09/20/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9E%B6%E6%9E%84/">数据仓库-架构</a></li><li><a href="/2020/09/19/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%A6%82%E8%BF%B0/">数据仓库-概述</a></li><li><a href="/2020/09/18/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a></li><li><a href="/2020/09/10/BigDataFrame/YARN/">YARN</a></li><li><a href="/2020/09/06/BigDataFrame/HDFS%E8%81%94%E9%82%A6%E6%9C%BA%E5%88%B6/">HDFS联邦机制</a></li><li><a href="/2020/09/05/BigDataFrame/HDFS%E9%AB%98%E5%8F%AF%E7%94%A8/">HDFS高可用机制</a></li></ul></div><div class="box widget"><div class="title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BI%E5%B7%A5%E5%85%B7/">BI工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ETL%E5%B7%A5%E5%85%B7/">ETL工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6/">大数据框架</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">1</span></li></ul></div><div class="box widget"><div class="title">归档</div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">2020-11</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">2020-09</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">2020-07</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">2020-06</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">2020-05</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">2020-01</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">2019-12</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">2019-07</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">2019-03</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">2018-09</a><span class="archive-list-count">1</span></li></ul></div></div></section><footer class="footer"><div class="global-width footer-box"><div class="copyright"><span>Copyright &copy; 2020</span> <span class="dotted">|</span> <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span> <span class="dotted">|</span></div></div></footer></div><script>hljs.initHighlightingOnLoad()</script></body></html>