<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="author" content="Eric"><meta name="keywords" content=""><meta name="description" content="数据仓库架构一、架构图
二、ETLExtract-Transform-Load

将数据从来源端经过抽取（extract）、交互转换（transform）、加载（load）至目的端的过程 
构建数据仓库的重要一环，用户从数据源抽取出所需的数据，经过数据清洗，最终按照预先定义好的数据仓库模型，将..."><meta name="Robots" content="all"><title>Eric个人博客 | 数据仓库-架构</title><link rel="icon" href="/images/icon.svg"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/atom-one-dark.css"><link rel="stylesheet" href="/css/style.css"><script src="/js/highlight.min.js"></script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Eric个人博客" type="application/atom+xml"></head><body><div class="main-container"><header class="header"><div class="global-width"><nav class="nav-box"><a class="nav-item" href="/">主页</a> <a class="nav-item" href="/resume">项目</a> <a class="nav-item" href="/mood" target="_blank">热点观点</a> <a class="nav-item" href="/2018/01/01/introduce/" target="_blank">个人介绍</a> <a class="nav-item" href="/fuye.md">关于</a></nav></div></header><section class="content global-width"><div class="main"><article class="box post"><div class="post-title align-center detail-title">数据仓库-架构</div><div class="post-meta align-center"><span class="label">原创</span> <span class="dotted">|</span> <i class="fa fa-calendar"></i> <time>2020-09-20</time> <span class="dotted">|</span> <i class="fa fa-user"></i> Eric <span class="dotted">|</span> <i class="fa fa-folder-open-o"></i> <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a></div><div class="post-content"><h1 id="数据仓库架构"><a href="#数据仓库架构" class="headerlink" title="数据仓库架构"></a>数据仓库架构</h1><h3 id="一、架构图"><a href="#一、架构图" class="headerlink" title="一、架构图"></a>一、架构图</h3><p><img src="https://i.loli.net/2020/11/10/5e1aKBLCuw6MXFN.png" alt="image-20201110101550468"></p><h3 id="二、ETL"><a href="#二、ETL" class="headerlink" title="二、ETL"></a>二、ETL</h3><p>Extract-Transform-Load</p><ul><li>将数据从来源端经过抽取（extract）、交互转换（transform）、加载（load）至目的端的过程</li><li>构建数据仓库的重要一环，用户从数据源抽取出所需的数据，经过数据清洗，最终按照预先定义好的数据仓库模型，将数据加载到数据仓库中去</li><li>ETL 规则的设计和实施约占整个数据仓库搭建工作量的 60%～80%<a id="more"></a></li></ul><p><img src="https://i.loli.net/2020/11/10/NQPySwBCxId2WcG.png" alt="image-20201110102549877"></p><h4 id="Extract"><a href="#Extract" class="headerlink" title="Extract"></a>Extract</h4><h5 id="1-数据源"><a href="#1-数据源" class="headerlink" title="1.数据源"></a>1.数据源</h5><ul><li>抽取的数据源可以分为结构化数据、非结构化数据、半结构化数据</li><li>结构化数据一般采用JDBC、数据库日志方式，非/半结构化数据（日志/Json数据)会监听文件变动</li></ul><h5 id="2-抽取方式"><a href="#2-抽取方式" class="headerlink" title="2.抽取方式"></a>2.抽取方式</h5><ul><li>全量同步会将全部数据进行抽取，一般用于初始化数据装载</li><li>增量同步方式会检测数据的变动，抽取发生变动的数据，一般用于数据更新</li></ul><h4 id="Transformer"><a href="#Transformer" class="headerlink" title="Transformer"></a>Transformer</h4><h5 id="1-清洗"><a href="#1-清洗" class="headerlink" title="1.清洗"></a>1.清洗</h5><p>对出现的重复、二义性、不完整、违反业务或逻辑规则等问题的数据进行统一的处理</p><h5 id="2-转换"><a href="#2-转换" class="headerlink" title="2.转换"></a>2.转换</h5><p>对数据进行标准化处理，进行字段、数据类型、数据定义的转换</p><h4 id="Load"><a href="#Load" class="headerlink" title="Load"></a>Load</h4><p>将处理玩的数据导入到相应的目标源中</p><h4 id="ETL工具"><a href="#ETL工具" class="headerlink" title="ETL工具"></a>ETL工具</h4><h5 id="1-结构化数据工具"><a href="#1-结构化数据工具" class="headerlink" title="1. 结构化数据工具"></a>1. 结构化数据工具</h5><ul><li>Sqoop</li><li>Kettle</li><li>Datastage</li><li>Informatica</li><li>Kafka</li></ul><h5 id="2-非-半结构化数据"><a href="#2-非-半结构化数据" class="headerlink" title="2.非/半结构化数据"></a>2.非/半结构化数据</h5><ul><li>Flume</li><li>Logstash</li></ul><h3 id="三、数仓分层"><a href="#三、数仓分层" class="headerlink" title="三、数仓分层"></a>三、数仓分层</h3><h4 id="ODS层"><a href="#ODS层" class="headerlink" title="ODS层"></a>ODS层</h4><ul><li>数据与原业务数据保持一致，可以增加字段用来进行数据管理</li><li>存储的历史数据是只读的，提供业务系统查询使用</li><li>业务系统对历史数据完成修改后，将update_type字段更新为UPDATE，追加回ODS中</li></ul><p><img src="https://i.loli.net/2020/11/10/5th7JgGFyDCQbnP.png" alt="image-20201110111017790"></p><ul><li>在离线数仓中，业务数据定期通过ETL流程导入到ODS中，导入方式有全量、增量两种<ul><li>全量导入：数据第一次导入时，选择此种方式</li><li>增量导入：数据非第一次导入，每次只需要导入新增、更改的数据，建议使用外连接&amp;全覆盖方式</li></ul></li></ul><h4 id="DWD层"><a href="#DWD层" class="headerlink" title="DWD层"></a>DWD层</h4><ul><li>数据明细层对ODS层的数据进行清洗、标准化、<font color="red">维度退化</font>（时间、分类、地域）</li><li>数据仍然满足3NF模型，为分析运算做准备</li></ul><p><img src="https://i.loli.net/2020/11/10/qVJ4dhaL7NyxsWf.png" alt="image-20201110111447895"></p><h4 id="DWS层"><a href="#DWS层" class="headerlink" title="DWS层"></a>DWS层</h4><ul><li>数据汇总层的数据对数据明细层的数据，按照分析主题进行计算汇总，存放便于分析的宽表</li><li>存储模型并非3NF，而是注重数据聚合，复杂查询、处理性能更优的数仓模型，如<font color="red">维度模型</font></li></ul><h4 id="ADS层"><a href="#ADS层" class="headerlink" title="ADS层"></a>ADS层</h4><ul><li>数据应用层也被称为数据集市</li><li>存储数据分析结果，为不同业务场景提供接口，减轻数据仓库的负担</li><li>数据仓库擅长数据分析，直接开放业务查询接口，会加重其负担，一般用ADS层存储结果，快速查询和交互</li></ul><p><img src="https://i.loli.net/2020/11/10/iYSmelMtwDR6Wah.png" alt="image-20201110111751436"></p></div></article></div><div class="aside"><div class="box widget"><div class="introduction"><p><img src="/images/ironman.jpg" alt="head-sculpture"></p><p class="name">罗明辉Eric</p><p class="slogan">个人博客，分享经验，分享快乐</p></div></div><div class="box widget"><div class="title">最新</div><ul class="item-box"><li><a href="/2020/11/13/BigDataFrame/Flink/">Flink</a></li><li><a href="/2020/11/05/BigDataFrame/canal/">Canal</a></li><li><a href="/2020/09/26/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E5%BB%BA%E6%A8%A1/">数据仓库-建模</a></li><li><a href="/2020/09/20/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%9E%B6%E6%9E%84/">数据仓库-架构</a></li><li><a href="/2020/09/19/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93%E6%A6%82%E8%BF%B0/">数据仓库-概述</a></li><li><a href="/2020/09/18/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a></li><li><a href="/2020/09/10/BigDataFrame/YARN/">YARN</a></li><li><a href="/2020/09/06/BigDataFrame/HDFS%E8%81%94%E9%82%A6%E6%9C%BA%E5%88%B6/">HDFS联邦机制</a></li></ul></div><div class="box widget"><div class="title">分类</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/BI%E5%B7%A5%E5%85%B7/">BI工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ETL%E5%B7%A5%E5%85%B7/">ETL工具</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A1%86%E6%9E%B6/">大数据框架</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E4%BB%93%E5%BA%93/">数据仓库</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><span class="category-list-count">1</span></li></ul></div><div class="box widget"><div class="title">归档</div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">2020-11</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">2020-09</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">2020-07</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">2020-06</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">2020-05</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">2020-01</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">2019-12</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">2019-07</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">2019-03</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">2018-09</a><span class="archive-list-count">1</span></li></ul></div></div></section><footer class="footer"><div class="global-width footer-box"><div class="copyright"><span>Copyright &copy; 2020</span> <span class="dotted">|</span> <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span> <span class="dotted">|</span></div></div></footer></div><script>hljs.initHighlightingOnLoad()</script></body></html>